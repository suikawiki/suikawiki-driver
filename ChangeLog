2008-11-16  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: Don't log user name for normal page edits.

2008-11-16  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: Bug fix: for (@{child_nodes}) {append_child} does not
	work.

2008-11-16  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: Set <meta name=ROBOTS content=NOINDEX> for
	non-page-content pages.  Insert article heading.  Added support
	for page title.  Remove empty page name when new page names are
	submitted.

2008-11-14  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: Make the h1 element a permalink for the page name.

2008-11-14  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: SWML/HTML convertion was moved to another Perl module
	file (SWE::Lang::XML2HTML).

2008-11-14  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: sw:anchor/@sw:anchor was not reflected to the HTML
	output.  td/@colspan was not reflected to the HTML rendering.
	Show the HTML-rendered page after saving the posted page (future
	version should support "save"-only feature by using ajax).
	Generate rel=alternate links to text/XML versions from HTML
	version.
	(set_head_content): Support arbitrary link elements.

2008-11-14  Wakaba  <wakaba@suika.fam.cx>

	* sw3listsplit.pl: New file.

	* sw.cgi: Use SWE::DB::SuikaWiki3PageList2 instead of
	SWE::DB::SuikaWiki3PageList, to avoid CVS's rcs file size (and
	process load) problem caused by the monolisic file database.

2008-11-12  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: Oops, syntax error.

2008-11-12  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: Avoid cvs being too loading by not to commit the sw3
	page list every time.

2008-11-11  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: Oops, $html_doc was not set when the page is not created
	yet.
	
2008-11-11  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: Caching of generated HTML articles implemented.

2008-11-11  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi (get_xml_data): Get the cache-prop object outside of the
	function, too.

2008-11-11  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi (get_xml_data): Lock the id outside of the function.

2008-11-10  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: <link rel=archives> added.

2008-11-10  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: Put edit-body-content form into a section element.  Use
	new style sheet URL.  Use |div| instead of |p| for
	|sw10:comment-p| and |sw10:ed| elements for compatibility with
	HTML syntax (where block-level elements such as |ul| can't be
	inserted in |p| elemnets).

2008-11-10  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: Normalize white space characters and fullwidth/halfwidth
	characters in names and contents.  Add links to the content page
	in the edit page.  Typo fixed.

2008-11-10  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: Don't use PATH_INFO but use our own PATH_INFO created
	from REQUEST_URI since it turns out that PATH_INFO is
	percent-decoded such that '$' or ';' can't be distinguished in
	percent-encoded and non-encode forms.  Error pages and
	redirections are implemented.
	(sw:anchor): Support for './', '../', and '//' links for backward
	compatibility.  Normalize spaces in names.
	(get_page_url): Don't normalize spaces here.
	(percent_encode_na): New function.

2008-11-10  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: The STDOUT was not set to UTF-8 in some mode.  Fact out
	<link rel=stylesheet> code and add <link rel=license>.  Add link
	to the license page for all edit and content pages.
	(get_page_url): Support link from another hierarchy.

2008-11-10  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: Show a link to page creation page if there is no
	associated page for a name.  Fact out |get_content_type_parameter|
	and |set_content_type_options| functions.  Use "(no title)" for
	the name for an anonymous page so that no page turns into really
	no title.  'new-page' implemented.
	(http_redirect): New.

2008-11-09  Wakaba  <wakaba@suika.fam.cx>

	* sw3.cgi (convert_sw3_page): Set the |hash| property of the
	id-prop.

2008-11-09  Wakaba  <wakaba@suika.fam.cx>

	* mksw3list.pl: Append index to duplicate keywords to remove
	duplication such that migration process in sw.cgi is simplified.

	* sw.cgi: "n/name$index" syntax introduced.  Lock & unlock is now
	done outside of |convert_sw3_page| function.  Generate list of
	same-name pages.  Remove ";metadata" parameter support for
	debugging.  Commit changes to CVS repository after modification of
	a content.  Generate names form, too, in ";edit" page.  Support
	for name changing.  Property name for identifiers in the name-prop
	changed from "ids" to "id" for consistency.
	(get_page_url): Support for "$index" suffix.
	(convert_sw3_page): Don't lock in thie function.  Commit changes
	to CVS repository.
	(get_xml_data): Don't update id-prop, since the database might not
	be locked in the context where this function is invoked.

2008-11-09  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: The code to generate HTML headers and body element
	container itself is moved from |convert_swml_to_html| to the main
	code.  Insert an "edit" link to the HTML document.  Page-edit
	feature implemented.
	(get_page_url): "/" was not converted to "+".
	(get_xml_data): Lock before accessing to the cache.  Save the hash
	of the cached copy of the source text and check whether the cache
	is up to date before returning a cached copy.
	(get_hash): New function.
	(convert_sw3_page): Lock the id before new copy is stored, to
	avoid race condition (access by id before the end of convertion).

2008-11-09  Wakaba  <wakaba@suika.fam.cx>

	* mksw3list: Don't replace namespace separator '//' by a space,
	for compatibility with existing WikiNames that contains '//' as
	part of semantic name, e.g. 'http://www.w3.org/1999/xhtml';

	* sw.cgi (get_page_url): No longer split name by '//'.  Normalize
	white space in the name.

2008-11-09  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: Changed to name-id indirection mode for page/data
	identification and implemented
	(most part of) incremental convertion from SuikaWiki3 data to new
	database structure.

	* mksw3list.pl: New script.

2008-11-08  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: Support for metadata view.

2008-11-08  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: Fix support for "/" in path.  Support for XML cache.
	Tentative support for XML dump removed (code is moved to
	SWE::DB::DOM).

2008-11-08  Wakaba  <wakaba@suika.fam.cx>

	* .htaccess: New file.

2008-11-08  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi (store_dom): New method.
	(percent_decode): Reimplemented.

2008-11-07  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: HTML convertion implemented.

2008-11-07  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: New script.

	* ChangeLog: New file.


