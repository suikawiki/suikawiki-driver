2008-11-09  Wakaba  <wakaba@suika.fam.cx>

	* sw3.cgi (convert_sw3_page): Set the |hash| property of the
	id-prop.

2008-11-09  Wakaba  <wakaba@suika.fam.cx>

	* mksw3list.pl: Append index to duplicate keywords to remove
	duplication such that migration process in sw.cgi is simplified.

	* sw.cgi: "n/name$index" syntax introduced.  Lock & unlock is now
	done outside of |convert_sw3_page| function.  Generate list of
	same-name pages.  Remove ";metadata" parameter support for
	debugging.  Commit changes to CVS repository after modification of
	a content.  Generate names form, too, in ";edit" page.  Support
	for name changing.  Property name for identifiers in the name-prop
	changed from "ids" to "id" for consistency.
	(get_page_url): Support for "$index" suffix.
	(convert_sw3_page): Don't lock in thie function.  Commit changes
	to CVS repository.
	(get_xml_data): Don't update id-prop, since the database might not
	be locked in the context where this function is invoked.

2008-11-09  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: The code to generate HTML headers and body element
	container itself is moved from |convert_swml_to_html| to the main
	code.  Insert an "edit" link to the HTML document.  Page-edit
	feature implemented.
	(get_page_url): "/" was not converted to "+".
	(get_xml_data): Lock before accessing to the cache.  Save the hash
	of the cached copy of the source text and check whether the cache
	is up to date before returning a cached copy.
	(get_hash): New function.
	(convert_sw3_page): Lock the id before new copy is stored, to
	avoid race condition (access by id before the end of convertion).

2008-11-09  Wakaba  <wakaba@suika.fam.cx>

	* mksw3list: Don't replace namespace separator '//' by a space,
	for compatibility with existing WikiNames that contains '//' as
	part of semantic name, e.g. 'http://www.w3.org/1999/xhtml';

	* sw.cgi (get_page_url): No longer split name by '//'.  Normalize
	white space in the name.

2008-11-09  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: Changed to name-id indirection mode for page/data
	identification and implemented
	(most part of) incremental convertion from SuikaWiki3 data to new
	database structure.

	* mksw3list.pl: New script.

2008-11-08  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: Support for metadata view.

2008-11-08  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: Fix support for "/" in path.  Support for XML cache.
	Tentative support for XML dump removed (code is moved to
	SWE::DB::DOM).

2008-11-08  Wakaba  <wakaba@suika.fam.cx>

	* .htaccess: New file.

2008-11-08  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi (store_dom): New method.
	(percent_decode): Reimplemented.

2008-11-07  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: HTML convertion implemented.

2008-11-07  Wakaba  <wakaba@suika.fam.cx>

	* sw.cgi: New script.

	* ChangeLog: New file.


