## This file is generated from config/apache.conf.orig.  Don't edit.

ServerTokens OS
ServerRoot "/home/wakaba/server/sw5/apache/wiki"
PidFile run/httpd.pid
Timeout 120
KeepAlive Off
MaxKeepAliveRequests 100
KeepAliveTimeout 15

StartServers       5
MinSpareServers    3
MaxSpareServers    5
ServerLimit        5
MaxClients         5
MaxRequestsPerChild  4000

LoadModule auth_basic_module /usr/lib64/httpd/modules/mod_auth_basic.so
LoadModule authn_file_module /usr/lib64/httpd/modules/mod_authn_file.so
LoadModule authn_alias_module /usr/lib64/httpd/modules/mod_authn_alias.so
LoadModule authn_anon_module /usr/lib64/httpd/modules/mod_authn_anon.so
LoadModule authn_default_module /usr/lib64/httpd/modules/mod_authn_default.so
LoadModule authz_host_module /usr/lib64/httpd/modules/mod_authz_host.so
LoadModule authz_user_module /usr/lib64/httpd/modules/mod_authz_user.so
LoadModule authz_groupfile_module /usr/lib64/httpd/modules/mod_authz_groupfile.so
LoadModule authz_owner_module /usr/lib64/httpd/modules/mod_authz_owner.so
LoadModule authz_default_module /usr/lib64/httpd/modules/mod_authz_default.so
LoadModule log_config_module /usr/lib64/httpd/modules/mod_log_config.so
LoadModule logio_module /usr/lib64/httpd/modules/mod_logio.so
LoadModule env_module /usr/lib64/httpd/modules/mod_env.so
LoadModule ext_filter_module /usr/lib64/httpd/modules/mod_ext_filter.so
LoadModule headers_module /usr/lib64/httpd/modules/mod_headers.so
LoadModule setenvif_module /usr/lib64/httpd/modules/mod_setenvif.so
LoadModule mime_module /usr/lib64/httpd/modules/mod_mime.so
LoadModule info_module /usr/lib64/httpd/modules/mod_info.so
LoadModule vhost_alias_module /usr/lib64/httpd/modules/mod_vhost_alias.so
LoadModule negotiation_module /usr/lib64/httpd/modules/mod_negotiation.so
LoadModule dir_module /usr/lib64/httpd/modules/mod_dir.so
LoadModule rewrite_module /usr/lib64/httpd/modules/mod_rewrite.so
LoadModule perl_module /usr/lib64/httpd/modules/mod_perl.so

#User apache
#Group apache

ServerAdmin webmaster@suika.fam.cx
ServerName suikawiki
UseCanonicalName Off

HostnameLookups Off

ErrorLog logs/error_log
LogLevel warn

LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
LogFormat "%h %l %u %t \"%r\" %>s %b" common
LogFormat "%{Referer}i -> %U" referer
LogFormat "%{User-agent}i" agent

CustomLog logs/access_log combined

ServerSignature On
AddDefaultCharset UTF-8

Listen 10085

<Location />
  Deny from all
</Location>

PerlSwitches -I/home/wakaba/server/sw5/lib
PerlSetEnv X_SW_ENV wiki
PerlModule SuikaWiki5::Main

<Location /query>
  Allow from all

  PerlSetEnv X_SW_SCRIPT_NAME /~wakaba/wiki/sw
  PerlSetEnv X_SW_USE_QUERY_STRING_AS_URL 1

  SetHandler perl-script
  PerlResponseHandler SuikaWiki5::Main
  PerlOptions +ParseHeaders

  <Limit POST PUT DELETE>
    Require group suikawiki
    AuthType Basic
    AuthUserFile /home/wakaba/public_html/pbin/accounts/data/htpasswd
    AuthGroupFile /home/wakaba/public_html/pbin/accounts/data/htgroup
    AuthName "SuikaWiki"
  </Limit>

  ErrorDocument 401 /query?/~wakaba/wiki/sw/n/Wiki++Error++401
</Location>
